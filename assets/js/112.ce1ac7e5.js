(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{612:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"开发环境优化配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境优化配置"}},[s._v("#")]),s._v(" 开发环境优化配置")]),s._v(" "),a("h2",{attrs:{id:"hmr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hmr"}},[s._v("#")]),s._v(" HMR")]),s._v(" "),a("p",[s._v("当开启了 "),a("code",[s._v("devServer")]),s._v(" 后，如果修改项目中的某一模块，那么整个项目将会被全部重新打包。如果是一个庞大的项目，那么没修改一点点就需要全部打包，消耗大量时间。由此使用 HMR ( hot module replacement 热模块替换 / 模块热替换) 来只进行性修改部分的更新打包，加快开发进度。")]),s._v(" "),a("p",[s._v("首先需要把 "),a("code",[s._v("webpack.config.js")]),s._v(" 文件中的 "),a("code",[s._v("devServer")]),s._v(" 的 "),a("code",[s._v("hot")]),s._v(" 字段设置为"),a("code",[s._v("true")]),s._v(" 开启 HMR 功能。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("   devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'build'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      compress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      open"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启HMR功能")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 当修改了webpack配置，新配置要想生效，必须重新webpack服务")]),s._v("\n      hot"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),s._v(" "),a("h3",{attrs:{id:"处理样式文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理样式文件"}},[s._v("#")]),s._v(" 处理样式文件")]),s._v(" "),a("p",[s._v("在使用 "),a("code",[s._v("style-loader")]),s._v(" 对样式文件进行处理时，由于 "),a("code",[s._v("style-loader")]),s._v(" 已经实现了 默认支持 HMR ，不需要任何操作。修改某一个 css 文件只会对这个文件进行更新打包，对其他模块没有影响。")]),s._v(" "),a("h3",{attrs:{id:"处理-js-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理-js-文件"}},[s._v("#")]),s._v(" 处理 js 文件")]),s._v(" "),a("p",[s._v("在 js 文件中添加如下代码")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" print "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./print'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一旦 module.hot 为true，说明开启了HMR功能。 --\x3e 让HMR功能代码生效")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./print.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 方法会监听 print.js 文件的变化，一旦发生变化，其他模块不会重新打包构建。")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 会执行后面的回调函数")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("通过 "),a("code",[s._v("module.hot")]),s._v(" 获取 "),a("code",[s._v("webpack.config.js")]),s._v(" 中的 "),a("code",[s._v("devServer")]),s._v(" 的 HMR 知否开启 。通过监听所引用文件的更新，更新后执行回调函数。达到修改引入文件只会对这个文件进行更新打包，对其他模块没有影响。"),a("strong",[s._v("HMR功能对 js 的处理，只能处理非入口 js 文件的文件。")])]),s._v(" "),a("h3",{attrs:{id:"处理-html-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理-html-文件"}},[s._v("#")]),s._v(" 处理 html 文件")]),s._v(" "),a("p",[s._v("开启 HMR 后 html 文件的修改之后没有办法进行更新。在 "),a("code",[s._v("webpack")]),s._v(" 配置入口文件加入 "),a("code",[s._v("index.html")]),s._v(" 的路径即可解决问题。html 文件不需要做 HMR 处理，以为项目中只有一个 html。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v(" entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./public/index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source-map"}},[s._v("#")]),s._v(" source-map")]),s._v(" "),a("p",[a("code",[s._v("source-map")]),s._v(" : 一种提供源代码到构建后代码的映射技术（如果构建后代码出错了，通过映射在浏览器调试工具中可以追踪源代码错误位置）在 webpack 配置文件中通过对 "),a("code",[s._v("devtool")]),s._v(" 字段进行配置。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("devtool: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("inline-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("hidden-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("eval-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("nosources-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cheap-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("module-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("source-map\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"配置组合解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置组合解释"}},[s._v("#")]),s._v(" 配置组合解释")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("组合")]),s._v(" "),a("th",[s._v("生成 sourceMap 文件")]),s._v(" "),a("th",[s._v("解释")]),s._v(" "),a("th",[s._v("构建的速度")]),s._v(" "),a("th",[s._v("重新构建的速度")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("source-map")])]),s._v(" "),a("td",[s._v("在 "),a("code",[s._v("build.js")]),s._v(" 外部生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 文件")]),s._v(" "),a("td",[s._v("错误代码准确信息、源代码的错误位置（行列）")]),s._v(" "),a("td",[s._v("慢")]),s._v(" "),a("td",[s._v("慢")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("inline-source-map")])]),s._v(" "),a("td",[s._v("生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 追加在 "),a("code",[s._v("build.js")]),s._v(" 后面")]),s._v(" "),a("td",[s._v("错误代码准确信息、源代码的错误位置（行列）")]),s._v(" "),a("td",[s._v("慢")]),s._v(" "),a("td",[s._v("慢")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("hidden-source-map")])]),s._v(" "),a("td",[s._v("在 "),a("code",[s._v("build.js")]),s._v(" 外部生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 文件")]),s._v(" "),a("td",[s._v("不能追踪源代码、只能提示到构建后代码的错误位置（行列）")]),s._v(" "),a("td",[s._v("慢")]),s._v(" "),a("td",[s._v("慢")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("eval-source-map")])]),s._v(" "),a("td",[s._v("每一个文件都生成对应的 "),a("code",[s._v("sourceMap")]),s._v(" 都在 "),a("code",[s._v("build.js")]),s._v(" 的 "),a("code",[s._v("eva")]),s._v("l 函数中")]),s._v(" "),a("td",[s._v("错误代码准确信息、源代码的错误位置（行列）")]),s._v(" "),a("td",[s._v("慢")]),s._v(" "),a("td",[s._v("比较快")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("nosources-source-map")])]),s._v(" "),a("td",[s._v("在 "),a("code",[s._v("build.js")]),s._v(" 外部生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 文件")]),s._v(" "),a("td",[s._v("错误代码准确信息、但是没有任何源代码信息")]),s._v(" "),a("td",[s._v("慢")]),s._v(" "),a("td",[s._v("慢")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("cheap-source-map")])]),s._v(" "),a("td",[s._v("在 "),a("code",[s._v("build.js")]),s._v(" 外部生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 文件")]),s._v(" "),a("td",[s._v("错误代码准确信息、源代码的错误位置（行）")]),s._v(" "),a("td",[s._v("比较快")]),s._v(" "),a("td",[s._v("中等")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("cheap-module-source-map")])]),s._v(" "),a("td",[s._v("在 "),a("code",[s._v("build.js")]),s._v(" 外部生成一个 "),a("code",[s._v("sourceMap")]),s._v(" 文件")]),s._v(" "),a("td",[s._v("错误代码准确信息、源代码的错误位置（行）"),a("code",[s._v("module")]),s._v(" 会将 "),a("code",[s._v("loader")]),s._v(" 的 "),a("code",[s._v("source map")]),s._v(" 加入")]),s._v(" "),a("td",[s._v("中等")]),s._v(" "),a("td",[s._v("比较慢")])])])]),s._v(" "),a("h3",{attrs:{id:"使用选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用选择"}},[s._v("#")]),s._v(" 使用选择")]),s._v(" "),a("p",[a("strong",[s._v("开发环境")]),s._v("：速度快，调试更友好。使用 "),a("code",[s._v("eval-source-map")]),s._v("  /  "),a("code",[s._v("eval-cheap-module-souce-map")])]),s._v(" "),a("p",[a("strong",[s._v("生产环境")]),s._v("：源代码要不要隐藏? 调试要不要更友好？不使用内联的 "),a("code",[s._v("sourceMap")]),s._v("  内联会让代码体积变大。")]),s._v(" "),a("p",[s._v("要考虑隐藏代码：使用 "),a("code",[s._v("hidden-source-map")]),s._v(" 只隐藏源代码，会提示构建后代码错误信息、"),a("code",[s._v("nosources-source-map")]),s._v(" 全部隐藏 。不考虑隐藏代码："),a("code",[s._v("source-map")]),s._v(" /  "),a("code",[s._v("cheap-module-souce-map")])])])}),[],!1,null,null,null);t.default=n.exports}}]);
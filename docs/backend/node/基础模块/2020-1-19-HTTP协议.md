---
title: "HTTP 协议"
date: 2020-01-19
sidebar: 'auto'
categories:
- BackEnd
tags:
- node基础模块
---






# HTTP 协议

## 概念

> 超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）规定了如何从网站服务器传输超文本到本地浏览器，它基于客户端服务器架构工作，是客户端（用户）和服务器端（网站）请求和应答的标准。

<img src="/img/http协议.png" >

## 报文

> 在HTTP请求和响应的过程中传递的数据块就叫报文，包括要传送的数据和一些附加信息，并且要遵守规定好的格式。

<img src="/img/baowen.png" >



## 请求报文

### 请求方式

在HTTP/1.1协议中，定义了8种发送http请求的方法

`GET`、`POST`、`OPTIONS`、`HEAD`、`PUT`、`DELETE`、`TRACE`、`CONNECT`、`PATCH`

根据`HTTP`协议的设计初衷，不同的方法对资源有不同的操作方式（主要GET和POST）

* PUT ：增
* DELETE ：删
* POST：改
* GET：查



#### GET和POST区别

要想使用`GET`和`POST`请求跟服务器进行交互，得先了解一个概念：参数就是传递给服务器的具体数据，比如登录时的帐号、密码

`GET`和`POST`对比：`GET`和`POST`的主要区别表现在数据传递上

* `GET`

在请求URL后面以?的形式跟上发给服务器的参数，多个参数之间用&隔开，比如`http://ww.test.com/login?username=123&pwd=234&type=JSON`

注意：由于浏览器和服务器对URL长度有限制，因此在URL后面附带的参数是有限制的，通常不能超过1KB

* `POST`

发给服务器的参数全部放在请求体中。理论上，`POST`传递的数据量没有限制（具体还得看服务器的处理能力）



#### GET和POST的选择

选择GET和POST的建议

* 如果要传递大量数据，比如文件上传，只能用`POST`请求

* `GET`的安全性比`POST`要差些，如果包含机密\敏感信息，建议用`POST`

* 如果仅仅是索取数据（数据查询），建议使用`GET`

* 如果是增加、修改、删除数据，建议使用`POST`

  

### 请求地址

```javascript
 app.on('request', (req, res) => {
     req.headers  // 获取请求报文
     req.url      // 获取请求地址
     req.method   // 获取请求方法
 });
```



### Node中请求对象属性

```javascript
req.method //客户端请求方式获取
req.url //请求地址获取
req.headers //获取请求报文信息
req.headers['accept']//获取请求报文的accept的具体信息
```





## 响应报文

### HTTP 状态码

* 200 请求成功
* 404 请求的资源没有被找到
* 500 服务器端错误
* 400 客户端请求有语法错误



### 内容类型

* text/html
* text/css
* application/javascript
* image/jpeg
* application/json

::: tip 参见网站

各种类文件类型的[content-tpye 对照表](https://tool.oschina.net/commons)

:::

```javascript
app.on('request', (req, res) => {
     // 设置响应报文
     res.writeHead(200, {         
         'Content-Type': 'text/html;charset=utf8‘
     });
 });
```
























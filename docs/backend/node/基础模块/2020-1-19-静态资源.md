---
title: "静态资源"
date: 2020-01-19
sidebar: 'auto'
categories:
- BackEnd
tags:
- node基础模块
---







# 静态资源

> 服务器不需要处理，可以直接响应给客户端的就是静态资源，如CSS javascipt image文件

## 静态资源的访问
怎样根据文件请求类型。去设置响应报文头，使用`mime.gettype() `来根据文件类型设置其`content-type`,请求根据路径返回资源类型

例子：简单实现静态资源的访问

目录结构 ：其中`public`为要提供访问的静态文件目录

<img src="/img/目录.png">

> 使用前首先用 `npm install mime`安装`mime`

代码示例 `app.js`

```javascript
const http = require('http')
const url = require('url')
const path = require('path')
const fs = require(app.js'fs')
const mime = require('mime')

const server = http.createServer()

server.on('request', (req, res) => {
    let realpath = ''
    let { pathname } = url.parse(req.url)

    pathname = pathname === '/' ? '/default.html' : pathname

    //将用户的请求地址转换成实际地址值 (通过__dirname来获取当前项目的根目录绝对地址)
    realpath = path.join(__dirname, 'public', pathname)

  //mime.getType() 方法 通过realpath（真实的地址）来判断所请求的静态资源的content-type,并返回它的值
    let contentType = mime.getType(realpath)

    fs.readFile(realpath, (err, data) => {

        if (err) {//出错err为null转换为布尔值为false
            res.end('404')
            return
        }

        res.writeHead(200, {
            'content-type': contentType//设置响应头
        })
        res.end(data)
    })
})

server.listen(3000)

console.log('服务器启动成功')
```



# 动态资源
> 相同的请求地址不同的资源响应，就是动态资源
> 例如
```javascript
http://ww.example.com/article?id = 1
http://ww.example.com/article?id = 2
```


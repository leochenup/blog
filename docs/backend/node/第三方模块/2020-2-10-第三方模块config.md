---
title: "第三方模块congfig"
date: 2020-02-10
sidebar: 'auto'
categories:
- BackEnd
tag:
- node第三方模块
---











# 第三方模块`config`

##  作用

允许开发人员将不同运行环境下的应用配置信息抽离到单独的文件中，模块内部自动判断当前应用的运行环境，并读取对应的配置信息，极大提供应用配置信息的维护成本，避免了当运行环境重复的多次切换时，手动到项目代码中修改配置信息。

## 使用步骤

* 使用`npm install config`命令下载模块
* 在项目的根目录下新建`config`文件夹
* 在`config`文件夹下面新建`default.json`、`development.json`、`production.json`文件
* 在项目中通过`require`方法，将模块进行导入
* 使用模块内部提供的`get`方法获取配置信息

在`default.json`、`development.json`、`production.json`三个文件中设置`title`属性，

```js
//default.json
{
    "title": "博客管理系统"
}
```

```js
//development.json
{
    "title": "博客管理系统----开发环境"
}
```

```js
//production.json
{
    "title": "博客管理系统----生产环境"
}
```

```js
//app.js
console.log(config.get('title'))

//结果 控制台中输出
//博客管理系统----开发环境
```

`config `模块会自动判断当前的运行环境，从而从该运行环境的配置文件中读取对应配置项的值。

 ## 敏感信息配置

>  再分享代码时,其他人可能会看到文件中的敏感信息，如数据库连接信息等。。。为了安全，需要将敏感信息配置到系统环境变量中。

**步骤**

* 在`config`文件夹中建立`custom-environment-variables.json`文件
* 配置项属性的值填写系统环境变量的名字
* 项目运行时`config`模块查找系统环境变量，并读取其值作为当前配置项属于的值

**实例**

将数据库连接配置项写在环境变量

先把`development.json`中的数据库密码配置项删除

```js
//development.json
{
    "title": "博客管理系统----开发环境",
    "db": {
        "user": "cqy",
        "host": "localhost",
        "port": "27017",
        "name": "blog"
    }
}
```

再在`custom-environment-variables.json`文件中写入数据库密码的配置项，值为在系统中配置的对应的环境变量名。

```
{
    "db": {
        "pwd": "APP_PASSWORD"
    }
}
```

<!-- ![捕获.PNG](https://i.loli.net/2020/02/09/CRdKyGi4BUgv98Z.png) -->



